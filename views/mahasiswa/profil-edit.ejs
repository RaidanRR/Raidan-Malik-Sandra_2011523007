<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>Profil</title>
    <link rel="stylesheet" href="/css/style-mahasiswa.css">
    <link href="/vendor/sweetalert2.all.min.css" rel="stylesheet">
    <script src="/vendor/sweetalert2.all.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <%- include('sidebar'); -%>

    <div id="container">
      <div class="jumbotron">
        <br />
        <h4 class="mb-3">Edit Profil</h4>
        
        <form class="mb-3" action="/mahasiswa/profil-edit/<%= user.id %>" method="POST" enctype="multipart/form-data" onsubmit="return success(event)">
          <div class="mb-3">
            <label for="name" class="form-label">Nama Mahasiswa</label>
            <input type="text" class="form-control" id="name" name="name" value="<%= user.name %>" required>
          </div>
          <div class="mb-3">
            <label for="phone" class="form-label">Nomor Telepon</label>
            <input type="number" class="form-control" id="phone" name="phone" value="<%= user.phone %>" required>
          </div>
          <div class="mb-3">
            <label for="nim" class="form-label">NIM Mahasiswa</label>
            <input type="number" class="form-control" id="nim" name="nim" value="<%= user.nim %>" required>
          </div>
          <div class="mb-3">
            <label for="judul_tugas_akhir" class="form-label">Judul Tugas Akhir</label>
            <input type="text" class="form-control" id="judul_tugas_akhir" name="judul_tugas_akhir" value="<%= user.judul_tugas_akhir %>">
          </div>
          <div class="mb-3">
            <label for="nama_dosen" class="form-label">Dosen Pembimbing</label>
            <input type="text" class="form-control" id="nama_dosen" name="nama_dosen" value="<%= user.nama_dosen %>">
          </div>
          <div class="mb-3">
            <label for="fakultas" class="form-label">Fakultas</label>
            <input type="text" class="form-control" id="fakultas" name="fakultas" value="<%= user.fakultas %>">
          </div>
          <div class="mb-3">
            <label for="jurusan" class="form-label">Jurusan</label>
            <input type="text" class="form-control" id="jurusan" name="jurusan" value="<%= user.jurusan %>">
          </div>
          <div class="mb-3">
            <label for="program_studi" class="form-label">Program Studi</label>
            <select class="form-control" id="program_studi" name="program_studi">
              <option value="S1" <% if (user.program_studi === 'S1') { %> selected <% } %>>S1</option>
              <option value="S2" <% if (user.program_studi === 'S2') { %> selected <% } %>>S2</option>
              <option value="S3" <% if (user.program_studi === 'S3') { %> selected <% } %>>S3</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="semester" class="form-label">Semester</label>
            <select class="form-control" id="semester" name="semester">
              <% for (let i = 1; i <= 14; i++) { %>
                <option value="<%= i %>" <% if (user.semester == i) { %> selected <% } %>><%= i %></option>
              <% } %>
            </select>
          </div>

          <script>
            function success(event) {
              event.preventDefault(); 
              Swal.fire({
                title: "Good job!",
                text: "Data saved",
                icon: "success"
              }).then(function() {
                event.target.submit(); 
              }).catch((error) => console.log(error));
              return false; 
            }
          </script>

          <button type="submit" class="btn btn-warning btn-lg back">Simpan</button>
        </form>
      </div>
    </div>
    
    <%- include('../partials/footer'); -%>
  </body>
</html>
